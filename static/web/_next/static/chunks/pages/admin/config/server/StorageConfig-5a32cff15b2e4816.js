(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6029],{86557:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/config/server/StorageConfig",function(){return a(60396)}])},73706:function(e,n,a){"use strict";a.d(n,{Z:function(){return d}});var s=a(85893),i=a(67294),t=a(94594),l=a(41983),r=a(39664),c=a(90745),o=a(99519);let d=e=>{let{apiPath:n,checked:a,reversed:d=!1,configPath:u="",disabled:h=!1,fieldName:f,label:v,tip:m,useSubmit:g,onChange:p}=e,[x,j]=(0,i.useState)(null),N=null,k=(0,i.useContext)(o.aC),{setFieldInConfigState:b}=k||{},C=()=>{j(null),clearTimeout(N),N=null},y=async e=>{if(g){j((0,l.kg)(l.Jk));let a=d?!e:e;await (0,c.Si)({apiPath:n,data:{value:a},onSuccess(){b({fieldName:f,value:a,path:u}),j((0,l.kg)(l.zv))},onError(e){j((0,l.kg)(l.Un,"There was an error: ".concat(e)))}}),N=setTimeout(C,c.sI)}p&&p(e)},w=null!==x&&x.type===l.Jk;return(0,s.jsxs)("div",{className:"formfield-container toggleswitch-container",children:[v&&(0,s.jsx)("div",{className:"label-side",children:(0,s.jsx)("span",{className:"formfield-label",children:v})}),(0,s.jsxs)("div",{className:"input-side",children:[(0,s.jsxs)("div",{className:"input-group",children:[(0,s.jsx)(t.Z,{className:"switch field-".concat(f),loading:w,onChange:y,defaultChecked:a,checked:a,checkedChildren:"ON",unCheckedChildren:"OFF",disabled:h}),(0,s.jsx)(r.E,{status:x})]}),(0,s.jsx)("p",{className:"field-tip",children:m})]})]})};d.defaultProps={apiPath:"",checked:!1,reversed:!1,configPath:"",disabled:!1,label:"",tip:"",useSubmit:!1,onChange:null}},68097:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return x}});var s=a(85893),i=a(54907),t=a(71577),l=a(94184),r=a.n(l),c=a(67294),o=a(99519),d=a(82661),u=a(90745),h=a(41983),f=a(40117),v=a(39664),m=a(37174),g=a(73706);let{Panel:p}=i.Z;function x(){let[e,n]=(0,c.useState)(null),[a,l]=(0,c.useState)(null),[x,j]=(0,c.useState)(!1),N=(0,c.useContext)(o.aC),{serverConfig:k,setFieldInConfigState:b}=N||{},{setMessage:C}=(0,c.useContext)(d.k),{s3:y}=k,{accessKey:w="",acl:S="",bucket:E="",enabled:P=!1,endpoint:_="",region:z="",secret:O="",servingEndpoint:T="",forcePathStyle:Z=!1}=y;if((0,c.useEffect)(()=>{n({accessKey:w,acl:S,bucket:E,enabled:P,endpoint:_,region:z,secret:O,servingEndpoint:T,forcePathStyle:Z}),j(P)},[y]),!e)return null;let K=()=>{l(null),clearTimeout(null)},U=a=>{let{fieldName:s,value:i}=a;n({...e,[s]:i})},D=async()=>{l((0,h.kg)(h.Jk)),await (0,u.Si)({apiPath:u.$w,data:{value:e},onSuccess(){b({fieldName:"s3",value:e,path:""}),l((0,h.kg)(h.zv,"Updated.")),setTimeout(K,u.sI),C("Changing your storage configuration will take place the next time you start a new stream.")},onError(e){l((0,h.kg)(h.Un,e)),setTimeout(K,u.sI)}})},F=e=>{j(e),U({fieldName:"enabled",value:e})},I=e=>{U({fieldName:"forcePathStyle",value:e})},J=r()({"edit-storage-container":!0,"form-module":!0,enabled:x}),X=function(e,n){let{endpoint:a,accessKey:s,secret:i,bucket:t,region:l,enabled:r,servingEndpoint:c,acl:o,forcePathStyle:d}=e;if(r){if(a&&(0,m.jv)(a)&&s&&i&&t&&l&&(r!==n.enabled||a!==n.endpoint||s!==n.accessKey||i!==n.secret||t!==n.bucket||l!==n.region||!n.servingEndpoint&&""!==c||n.servingEndpoint&&c!==n.servingEndpoint||!n.acl&&""!==o||n.acl&&o!==n.acl||d!==n.forcePathStyle))return!0}else if(r!==n.enabled)return!0;return!1}(e,y);return(0,s.jsxs)("div",{className:J,children:[(0,s.jsx)("div",{className:"enable-switch",children:(0,s.jsx)(g.Z,{apiPath:"",fieldName:"enabled",label:"Use S3 Storage Provider",checked:e.enabled,onChange:F})}),(0,s.jsxs)("div",{className:"form-fields",children:[(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(f.nv,{...u.zm.endpoint,value:e.endpoint,onChange:U})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(f.nv,{...u.zm.accessKey,value:e.accessKey,onChange:U})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(f.nv,{...u.zm.secret,value:e.secret,onChange:U})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(f.nv,{...u.zm.bucket,value:e.bucket,onChange:U})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(f.nv,{...u.zm.region,value:e.region,onChange:U})}),(0,s.jsx)(i.Z,{className:"advanced-section",children:(0,s.jsxs)(p,{header:"Optional Settings",children:[(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(f.nv,{...u.zm.acl,value:e.acl,onChange:U})}),(0,s.jsx)("div",{className:"field-container",children:(0,s.jsx)(f.nv,{...u.zm.servingEndpoint,value:e.servingEndpoint,onChange:U})}),(0,s.jsx)("div",{className:"enable-switch",children:(0,s.jsx)(g.Z,{...u.zm.forcePathStyle,fieldName:"forcePathStyle",checked:e.forcePathStyle,onChange:I})})]},"1")})]}),(0,s.jsxs)("div",{className:"button-container",children:[(0,s.jsx)(t.Z,{type:"primary",onClick:D,disabled:!X,children:"Save"}),(0,s.jsx)(v.E,{status:a})]})]})}},60396:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return t}});var s=a(85893);a(67294);var i=a(68097);function t(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"description",children:["Owncast supports optionally using external storage providers to stream your video. Learn more about this by visiting our"," ",(0,s.jsx)("a",{href:"https://owncast.online/docs/storage/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"Storage Documentation"}),"."]}),(0,s.jsx)("p",{className:"description",children:"Configuring this incorrectly will likely cause your video to be unplayable. Double check the documentation for your storage provider on how to configure the bucket you created for Owncast."}),(0,s.jsx)("p",{className:"description",children:"Keep in mind this is for live streaming, not for archival, recording or VOD purposes."}),(0,s.jsx)(i.default,{})]})}}},function(e){e.O(0,[5473,9774,2888,179],function(){return e(e.s=86557)}),_N_E=e.O()}]);