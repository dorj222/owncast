(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5685],{48689:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(1413),o=n(67294),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},a=n(42135),l=function(e,t){return o.createElement(a.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};l.displayName="DeleteOutlined";var c=o.forwardRef(l)},62705:function(e,t,n){var r=n(55639).Symbol;e.exports=r},44239:function(e,t,n){var r=n(62705),o=n(89607),i=n(2333),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},27561:function(e,t,n){var r=n(67990),o=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(o,""):e}},31957:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},89607:function(e,t,n){var r=n(62705),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,l=r?r.toStringTag:void 0;e.exports=function(e){var t=i.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(o){}var c=a.call(e);return r&&(t?e[l]=n:delete e[l]),c}},2333:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},55639:function(e,t,n){var r=n(31957),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},67990:function(e){var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},23279:function(e,t,n){var r=n(13218),o=n(7771),i=n(14841),a=Math.max,l=Math.min;e.exports=function(e,t,n){var c,u,s,d,f,p,h=0,v=!1,x=!1,y=!0;if("function"!=typeof e)throw TypeError("Expected a function");function m(t){var n=c,r=u;return c=u=void 0,h=t,d=e.apply(r,n)}function j(e){var n=e-p,r=e-h;return void 0===p||n>=t||n<0||x&&r>=s}function g(){var e,n,r,i=o();if(j(i))return b(i);f=setTimeout(g,(e=i-p,n=i-h,r=t-e,x?l(r,s-n):r))}function b(e){return(f=void 0,y&&c)?m(e):(c=u=void 0,d)}function w(){var e,n=o(),r=j(n);if(c=arguments,u=this,p=n,r){if(void 0===f)return h=e=p,f=setTimeout(g,t),v?m(e):d;if(x)return clearTimeout(f),f=setTimeout(g,t),m(p)}return void 0===f&&(f=setTimeout(g,t)),d}return t=i(t)||0,r(n)&&(v=!!n.leading,s=(x="maxWait"in n)?a(i(n.maxWait)||0,t):s,y="trailing"in n?!!n.trailing:y),w.cancel=function(){void 0!==f&&clearTimeout(f),h=0,c=p=u=f=void 0},w.flush=function(){return void 0===f?d:b(o())},w}},13218:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},37005:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},33448:function(e,t,n){var r=n(44239),o=n(37005);e.exports=function(e){return"symbol"==typeof e||o(e)&&"[object Symbol]"==r(e)}},7771:function(e,t,n){var r=n(55639);e.exports=function(){return r.Date.now()}},14841:function(e,t,n){var r=n(27561),o=n(13218),i=n(33448),a=0/0,l=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,u=/^0o[0-7]+$/i,s=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=c.test(e);return n||u.test(e)?s(e.slice(2),n?2:8):l.test(e)?a:+e}},54005:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/actions",function(){return n(2075)}])},2075:function(e,t,n){"use strict";n.r(t);var r=n(85893),o=n(48689),i=n(86548),a=n(84485),l=n(85402),c=n(18119),u=n(69677),s=n(32808),d=n(26713),f=n(71577),p=n(52206),h=n(96486),v=n.n(h),x=n(67294),y=n(39664),m=n(90745),j=n(41983),g=n(99519),b=n(37174);let{Title:w,Paragraph:k}=a.Z,Z=e=>{let{onOk:t,onCancel:n,open:o,action:i}=e,[a,d]=(0,x.useState)(""),[f,p]=(0,x.useState)(""),[h,v]=(0,x.useState)(""),[y,m]=(0,x.useState)(""),[j,g]=(0,x.useState)(""),[w,k]=(0,x.useState)(!1);(0,x.useEffect)(()=>{d((null==i?void 0:i.url)||""),p((null==i?void 0:i.title)||""),v((null==i?void 0:i.description)||""),m((null==i?void 0:i.icon)||""),g((null==i?void 0:i.color)||""),k((null==i?void 0:i.openExternally)||!1)},[i]);let Z={disabled:!((0,b.jv)(a,["https:"])&&""!==f)},O=e=>{k(e.target.checked)};return(0,r.jsx)(l.Z,{destroyOnClose:!0,title:null==i?"Create New Action":"Edit Action",open:o,onOk:function(){t(i,a,f,h,y,j,w),d(""),p(""),v(""),m(""),g(""),k(!1)},onCancel:n,okButtonProps:Z,children:(0,r.jsxs)(c.Z,{initialValues:i,children:["Add the URL for the external action you want to present."," ",(0,r.jsx)("strong",{children:"Only HTTPS urls are supported."}),(0,r.jsx)("p",{children:(0,r.jsx)("a",{href:"https://owncast.online/thirdparty/actions/",target:"_blank",rel:"noopener noreferrer",children:"Read more about external actions."})}),(0,r.jsx)(c.Z.Item,{name:"url",children:(0,r.jsx)(u.Z,{required:!0,placeholder:"https://myserver.com/action (required)",onChange:e=>d(e.currentTarget.value.trim()),type:"url",pattern:b.ax})}),(0,r.jsx)(c.Z.Item,{name:"title",children:(0,r.jsx)(u.Z,{value:f,required:!0,placeholder:"Your action title (required)",onChange:e=>p(e.currentTarget.value)})}),(0,r.jsx)(c.Z.Item,{name:"description",children:(0,r.jsx)(u.Z,{value:h,placeholder:"Optional description",onChange:e=>v(e.currentTarget.value)})}),(0,r.jsx)(c.Z.Item,{name:"icon",children:(0,r.jsx)(u.Z,{value:y,placeholder:"https://myserver.com/action/icon.png (optional)",onChange:e=>m(e.currentTarget.value)})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(c.Z.Item,{name:"color",style:{marginBottom:"0px"},children:(0,r.jsx)(u.Z,{type:"color",value:j,onChange:e=>g(e.currentTarget.value)})}),"Optional background color of the action button."]}),(0,r.jsx)(c.Z.Item,{name:"openExternally",children:(0,r.jsx)(s.Z,{checked:w,defaultChecked:w,onChange:O,children:"Open in a new tab instead of within your page."})})]})})},O=()=>{let e=(0,x.useContext)(g.aC),{serverConfig:t,setFieldInConfigState:n}=e||{},{externalActions:a}=t,[l,c]=(0,x.useState)(null),[u,s]=(0,x.useState)(!1),[h,b]=(0,x.useState)(null),[O,C]=(0,x.useState)(null),I=()=>{b(null),clearTimeout(null)};async function T(e){await (0,m.Si)({apiPath:m.os,data:{value:e},onSuccess(){n({fieldName:"externalActions",value:e,path:""}),b((0,j.kg)(j.zv,"Updated.")),setTimeout(I,m.sI)},onError(e){console.log(e),b((0,j.kg)(j.Un,e)),setTimeout(I,m.sI)}})}async function E(e){let t=[...l],n=l.findIndex(t=>t.url===e.url);t.splice(n,1);try{c(t),T(t)}catch(r){console.error(r)}}async function S(e,t,n,r,o,i,a){try{let u=[...l],s={url:t,title:n,description:r,icon:o,color:i,openExternally:a},d=e?l.findIndex(t=>v().isEqual(t,e)):-1;d>=0?u[d]=s:u.push(s),c(u),await T(u)}catch(f){console.error(f)}}async function _(e){C(e),s(!0)}(0,x.useEffect)(()=>{c(a||[])},[a]);let N=()=>{C(null),s(!0)},A=(e,t,n,r,o,i,a)=>{s(!1),S(e,t,n,r,o,i,a),C(null)},U=()=>{s(!1)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(w,{children:"External Actions"}),(0,r.jsx)(k,{children:"External action URLs are 3rd party UI you can display, embedded, into your Owncast page when a user clicks on a button to launch your action."}),(0,r.jsxs)(k,{children:["Read more about how to use actions, with examples, at"," ",(0,r.jsx)("a",{href:"https://owncast.online/thirdparty/?source=admin",target:"_blank",rel:"noopener noreferrer",children:"our documentation"}),"."]}),(0,r.jsx)(p.Z,{rowKey:e=>"".concat(e.title,"-").concat(e.url),columns:[{title:"",key:"delete-edit",render:(e,t)=>(0,r.jsxs)(d.Z,{size:"middle",children:[(0,r.jsx)(f.Z,{onClick:()=>E(t),icon:(0,r.jsx)(o.Z,{})}),(0,r.jsx)(f.Z,{onClick:()=>_(t),icon:(0,r.jsx)(i.Z,{})})]})},{title:"Name",dataIndex:"title",key:"title"},{title:"Description",dataIndex:"description",key:"description"},{title:"URL",dataIndex:"url",key:"url"},{title:"Icon",dataIndex:"icon",key:"icon",render:e=>e?(0,r.jsx)("img",{style:{width:"2vw"},src:e,alt:""}):null},{title:"Color",dataIndex:"color",key:"color",render:e=>e?(0,r.jsx)("div",{style:{backgroundColor:e,height:"30px"},children:e}):null},{title:"Opens",dataIndex:"openExternally",key:"openExternally",render:e=>e?"In a new tab":"In a modal"}],dataSource:l,pagination:!1}),(0,r.jsx)("br",{}),(0,r.jsx)(f.Z,{type:"primary",onClick:N,children:"Create New Action"}),(0,r.jsx)(y.E,{status:h}),(0,r.jsx)(Z,{action:O,open:u,onOk:A,onCancel:U})]})};t.default=O}},function(e){e.O(0,[3662,4485,8909,3903,4267,2206,8119,9774,2888,179],function(){return e(e.s=54005)}),_N_E=e.O()}]);