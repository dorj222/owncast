(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6559],{62705:function(t,e,n){var o=n(55639).Symbol;t.exports=o},44239:function(t,e,n){var o=n(62705),r=n(89607),i=n(2333),a=o?o.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?r(t):i(t)}},27561:function(t,e,n){var o=n(67990),r=/^\s+/;t.exports=function(t){return t?t.slice(0,o(t)+1).replace(r,""):t}},31957:function(t,e,n){var o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=o},89607:function(t,e,n){var o=n(62705),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,u=o?o.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),n=t[u];try{t[u]=void 0;var o=!0}catch(r){}var c=a.call(t);return o&&(e?t[u]=n:delete t[u]),c}},2333:function(t){var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},55639:function(t,e,n){var o=n(31957),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();t.exports=i},67990:function(t){var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},23279:function(t,e,n){var o=n(13218),r=n(7771),i=n(14841),a=Math.max,u=Math.min;t.exports=function(t,e,n){var c,l,s,f,d,p,m=0,v=!1,j=!1,g=!0;if("function"!=typeof t)throw TypeError("Expected a function");function h(e){var n=c,o=l;return c=l=void 0,m=e,f=t.apply(o,n)}function y(t){var n=t-p,o=t-m;return void 0===p||n>=e||n<0||j&&o>=s}function x(){var t,n,o,i=r();if(y(i))return b(i);d=setTimeout(x,(t=i-p,n=i-m,o=e-t,j?u(o,s-n):o))}function b(t){return(d=void 0,g&&c)?h(t):(c=l=void 0,f)}function w(){var t,n=r(),o=y(n);if(c=arguments,l=this,p=n,o){if(void 0===d)return m=t=p,d=setTimeout(x,e),v?h(t):f;if(j)return clearTimeout(d),d=setTimeout(x,e),h(p)}return void 0===d&&(d=setTimeout(x,e)),f}return e=i(e)||0,o(n)&&(v=!!n.leading,s=(j="maxWait"in n)?a(i(n.maxWait)||0,e):s,g="trailing"in n?!!n.trailing:g),w.cancel=function(){void 0!==d&&clearTimeout(d),m=0,c=p=l=d=void 0},w.flush=function(){return void 0===d?f:b(r())},w}},13218:function(t){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},37005:function(t){t.exports=function(t){return null!=t&&"object"==typeof t}},33448:function(t,e,n){var o=n(44239),r=n(37005);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==o(t)}},7771:function(t,e,n){var o=n(55639);t.exports=function(){return o.Date.now()}},14841:function(t,e,n){var o=n(27561),r=n(13218),i=n(33448),a=0/0,u=/^[-+]0x[0-9a-f]+$/i,c=/^0b[01]+$/i,l=/^0o[0-7]+$/i,s=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return a;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=o(t);var n=c.test(t);return n||l.test(t)?s(t.slice(2),n?2:8):u.test(t)?a:+t}},10887:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/chat/emojis",function(){return n(14518)}])},14518:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return y}});var o=n(85893),r=n(48689),i=n(84485),a=n(26713),u=n(71577),c=n(52206),l=n(77916),s=n(67294),f=n(39664),d=n(64777),p=n(60956),m=n(41983),v=n(90745);let{Title:j,Paragraph:g}=i.Z,h=()=>{let[t,e]=(0,s.useState)([]),[n,i]=(0,s.useState)(!1),[h,y]=(0,s.useState)(null),[x,b]=(0,s.useState)(null),w=null,k=()=>{y(null),clearTimeout(w),w=null};async function T(){i(!0);try{let t=await (0,d.rQ)("/api/emoji");e(t)}catch(n){console.error("error fetching emojis",n)}i(!1)}async function E(t){let e="/".concat(t.split("/").slice(3).join("/"));console.log(e),i(!0),y((0,m.kg)(m.Jk,"Deleting emoji..."));try{let n=await (0,d.rQ)(d.Ff,{method:"POST",data:{name:e}});if(n instanceof Error)throw n;y((0,m.kg)(m.zv,"Emoji deleted")),w=setTimeout(k,v.sI)}catch(o){y((0,m.kg)(m.Un,"".concat(o))),i(!1),w=setTimeout(k,v.sI)}T()}async function O(){i(!0);try{y((0,m.kg)(m.Jk,"Converting emoji..."));let t=await new Promise((t,e)=>{if(!p.dr.includes(x.type)){let n="File type is not supported: ".concat(x.type);return e(n)}(0,p.y3)(x,e=>t({name:x.name,url:e}))});y((0,m.kg)(m.Jk,"Uploading emoji..."));let e=await (0,d.rQ)(d.Qc,{method:"POST",data:{name:t.name,data:t.url}});if(e instanceof Error)throw e;y((0,m.kg)(m.zv,"Emoji uploaded successfully!")),T()}catch(n){y((0,m.kg)(m.Un,"".concat(n)))}w=setTimeout(k,v.sI),i(!1)}return(0,s.useEffect)(()=>{T()},[]),(0,o.jsxs)("div",{children:[(0,o.jsx)(j,{children:"Emojis"}),(0,o.jsx)(g,{children:"Here you can upload new custom emojis for usage in the chat. When uploading a new emoji, the filename will be used as emoji name."}),(0,o.jsx)(c.Z,{rowKey:t=>t.url,dataSource:t,columns:[{title:"",key:"delete",render:(t,e)=>(0,o.jsx)(a.Z,{size:"middle",children:(0,o.jsx)(u.Z,{onClick:()=>E(e.url),icon:(0,o.jsx)(r.Z,{})})})},{title:"Name",key:"name",dataIndex:"name"},{title:"Emoji",key:"url",render:(t,e)=>(0,o.jsx)("img",{src:e.url,alt:e.name,style:{maxWidth:"2vw"}})}],pagination:!1}),(0,o.jsx)("br",{}),(0,o.jsx)(l.Z,{name:"emoji",listType:"picture",className:"emoji-uploader",showUploadList:!1,accept:p.dr.join(","),beforeUpload:b,customRequest:O,disabled:n,children:(0,o.jsx)(u.Z,{type:"primary",disabled:n,children:"Upload new emoji"})}),(0,o.jsx)(f.Z,{status:h})]})};var y=h},60956:function(t,e,n){"use strict";n.d(e,{Z7:function(){return o},dr:function(){return r},kR:function(){return a},y3:function(){return i}});let o=2097152,r=["image/png","image/jpeg","image/gif"];function i(t,e){let n=new FileReader;n.addEventListener("load",()=>e(n.result)),n.readAsDataURL(t)}function a(t){let e=Math.floor(Math.log(t)/Math.log(1024)),n=1*Number((t/Math.pow(1024,e)).toFixed(2));return"".concat(n," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e])}}},function(t){t.O(0,[4485,8909,3903,4267,2206,7910,7916,9774,2888,179],function(){return t(t.s=10887)}),_N_E=t.O()}]);